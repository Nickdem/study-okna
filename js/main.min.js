"use strict";var __awaiter=function(e,a,l,i){return new(l=l||Promise)(function(n,t){function o(e){try{r(i.next(e))}catch(e){t(e)}}function c(e){try{r(i.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(o,c)}r((i=i.apply(e,a||[])).next())})},__generator=function(o,c){var r,a,l,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},u={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(r)throw new TypeError("Generator is already executing.");for(;i=u&&t[u=0]?0:i;)try{if(r=1,a&&(l=2&t[0]?a.return:t[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,t[1])).done)return l;switch(a=0,(t=l?[2&t[0],l.value]:t)[0]){case 0:case 1:l=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,a=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(l=0<(l=i.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3]))i.label=t[1];else if(6===t[0]&&i.label<l[1])i.label=l[1],l=t;else{if(!(l&&i.label<l[2])){l[2]&&i.ops.pop(),i.trys.pop();continue}i.label=l[2],i.ops.push(t)}}t=c.call(o,i)}catch(e){t=[6,e],a=0}finally{r=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function calculator(r){var e=document.querySelectorAll("#width"),t=document.querySelectorAll("#height"),n=document.querySelectorAll(".form__select"),o=document.querySelectorAll(".checkbox");function c(t,o,c){o.forEach(function(e,n){e.addEventListener(t,function(){switch(e.nodeName){case"SPAN":r.setFormValues(c,n);break;case"INPUT":"checkbox"===e.getAttribute("type")?(0===n?r.setFormValues(c,"Холодное"):r.setFormValues(c,"Теплое"),o.forEach(function(e,t){e.checked=!1,n==t&&(e.checked=!0)})):r.setFormValues(c,e.value);break;case"SELECT":r.setFormValues(c,e.value)}console.log(r)})})}c("click",document.querySelectorAll(".form__icon"),"view"),c("input",t,"height"),c("input",e,"width"),c("change",n,"type"),c("change",o,"profile")}function formState(){var n={};return{formValues:n,resetFormValues:function(){n&&Object.keys(n).forEach(function(e){delete n[e]})},setFormValues:function(e,t){n[e]=t}}}function checkNumInputs(e){document.querySelectorAll(e).forEach(function(e){e.addEventListener("input",function(){e.value=e.value.replace(/\D/,"")})})}function forms(o){var e=document.querySelectorAll(".base-form"),c=document.querySelectorAll(".base-form input"),r="Ждём...",a="Готово! Спасибо!",l="Что-то пошло не так...";e.forEach(function(n){n.addEventListener("submit",function(e){e.preventDefault();var t=document.createElement("span");t.classList.add("form__status"),n.appendChild(t),e=n.elements,Array.from(e).forEach(function(e){"INPUT"==e.tagName&&o.setFormValues(e.name,e.value)}),function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return document.querySelector(".form__status").innerText=r,[4,delay(function(){return o.formValues})];case 1:return[2,e.sent()]}})})}().then(function(e){console.log(e),t.innerText=a}).catch(function(){t.innerText=l}).finally(function(){c.forEach(function(e){e.value=""}),o.resetFormValues(),delay(function(){t.remove()},5e3),n.parentElement.classList.contains("dialog__content")&&n.parentElement.querySelector(".dialog__close").click()})})})}var delayTime=1500;function getRandomInt(e){return Math.floor(Math.random()*e)}function delay(t,n){return new Promise(function(e){return setTimeout(function(){return e(t())},n||getRandomInt(delayTime))})}function images(){var e=document.querySelector(".works__gallery"),t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("button"),c=document.createElement("img"),r=getScrollWidth();t.classList.add("dialog","dialog__gallery"),n.classList.add("dialog__content"),o.innerText="×",o.classList.add("dialog__close","uppercase"),n.appendChild(o),n.appendChild(c),t.appendChild(n),e.appendChild(t),e.addEventListener("click",function(e){e.target&&e.preventDefault();var e=e.target;e.classList.contains("preview")&&(t.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=r+"px",e=e.parentElement.getAttribute("href"),c.setAttribute("src",e))}),o.addEventListener("click",function(){t.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"})}function getScrollWidth(){return window.innerWidth-document.body.offsetWidth}function modals(r){function e(e,t,n){var e=document.querySelectorAll(e),o=document.querySelector(t),t=document.querySelector(n),c=getScrollWidth();e.forEach(function(e){e.addEventListener("click",function(e){e.target&&e.preventDefault(),document.querySelectorAll(".dialog").forEach(function(e){e.style.display="none"}),o.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=c+"px"})}),t.addEventListener("click",function(){o.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px",r()}),o.addEventListener("click",function(e){e.target===o&&(o.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px",r())})}e(".header__btn",".dialog__engineer",".dialog__engineer .dialog__close"),e(".phone-link",".dialog__call",".dialog__call .dialog__close"),e(".glazing__price button",".calc1",".calc1 .dialog__close"),e(".popup_calc2",".calc2",".calc2 .dialog__close"),e(".popup_calc3",".calc3",".calc3 .dialog__close")}function tabs(e,o,t,n,c){var e=document.querySelector(e),r=document.querySelectorAll(o),a=document.querySelectorAll(t);function l(){r.forEach(function(e){e.classList.remove(n)}),a.forEach(function(e){e.style.display="none"})}function i(t){a[t=void 0===t?0:t].style.display="flex",r.forEach(function(e){+e.getAttribute(c)==t&&(console.log(t),e.classList.add(n))})}l(),i(),e.addEventListener("click",function(e){e=e.target,t=o.replace(/\./,"");var t,n=e.parentNode.classList.contains(t)?e.parentNode:e;n&&r.forEach(function(e){e==n&&(l(),i(+n.getAttribute(c)))})})}function timer(c){var e=document.querySelectorAll(".timer-item"),r=setInterval(function(){var o;o=function(){if(c-a()<0)return clearInterval(r),[0,0,0,0];var e=(c-a())/1e3,t=e/60,n=t/60,o=l(n/24),n=l(n%24),t=l(t%60),e=l(e%60);return[o,n,t,e]}(),e.forEach(function(e,t){var n=o[t].toString();e.innerHTML=1<n.length?n:"0"+o[t]})},1e3);function a(){return Date.now()}function l(e){return Math.floor(e)}}window.addEventListener("DOMContentLoaded",function(){var e=formState(),t=new Date(2023,8).getTime();calculator(e),checkNumInputs(".base-form input[name = 'user_phone']"),checkNumInputs("#width"),checkNumInputs("#height"),modals(e.resetFormValues),tabs(".glazing__slider ",".glazing__block",".glazing__content","glazing__block--active","data-num"),tabs(".decoration__slider",".decoration__item--idle",".decoration__block","decoration__item--active","data-count"),tabs(".form__icons",".form__icon",".form__img img","form__icon--active","data-view"),forms(e),timer(t),images()});
//# sourceMappingURL=main.min.js.map
